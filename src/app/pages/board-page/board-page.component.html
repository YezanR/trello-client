
<div class="board-page">
    <div class="row">
        <nav class="nav">
            <a class="nav-link"><h5>{{ board?.title }}</h5></a>
            <a class="nav-link">{{ board?.owner.username }}</a>
        </nav>
    </div>
    
    <div class="board-body" cdkDropListGroup>
        <div class="task-group mr-2" *ngFor="let group of taskGroups">
            <div class="card">
                <div class="card-header">
                    {{ group.title }}
                </div>
    
                <div class="card-body"
                    cdkDropList (cdkDropListDropped)="drop($event, group)" [cdkDropListData]="group.tasks">
                    <div cdkDrag class="mb-2 task" [id]="'task-' + task.id" *ngFor="let task of group.tasks"
                        (cdkDropListDropped)="drop($event)">
                        {{ task.title }}
    
                        <fa-icon class="btn-edit-task" [icon]="iconEdit" (click)="showEditTask(task)">
                        </fa-icon>
                    </div>

                    <textarea *ngIf="groupHasNewTask(group)" 
                        placeholder="Enter a title for this task..."
                        class="form-control new-task" [(ngModel)]="newTask.title">
                    </textarea>
                </div>

    
                <div class="card-footer">
                    <button *ngIf="!groupHasNewTask(group)"
                        class="btn btn-new-task btn-block btn-light text-muted" 
                        (click)="showNewTask(group)">
                        <fa-icon [icon]="iconNew"></fa-icon> Add task
                    </button>
    
                    <button *ngIf="groupHasNewTask(group)" 
                        class="btn btn-block btn-success" 
                        [disabled]="!isTaskValid()"
                        (click)="createTask()">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <app-edit-task-modal #editTaskModal></app-edit-task-modal>
</div>
